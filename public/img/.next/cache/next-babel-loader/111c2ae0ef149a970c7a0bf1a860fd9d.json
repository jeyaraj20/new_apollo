{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nvar _this = this,\n    _jsxFileName = \"D:\\\\Question_cloud\\\\question_cloud_admin_web_new\\\\pages\\\\changepassword\\\\view\\\\index.jsx\",\n    _s = $RefreshSig$();\n\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nimport React, { useEffect, useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { Modal, Button, Checkbox, Spin, notification, Pagination, Tabs, Select } from 'antd'; // import * as adminService from '../../../../../../services/adminService';\n// import auth from '../../../../../../services/authService';\n\nimport Joi from 'joi-browser';\n\nvar ChangePasswordForm = function ChangePasswordForm(props) {\n  _s();\n\n  var _useState = useState(false),\n      showMessage = _useState[0],\n      setShowMessage = _useState[1];\n\n  var _useState2 = useState(\"\"),\n      alertMessage = _useState2[0],\n      setAlertMessage = _useState2[1];\n\n  var _useState3 = useState(\"\"),\n      userName = _useState3[0],\n      setUserName = _useState3[1];\n\n  var _useState4 = useState(\"\"),\n      userType = _useState4[0],\n      setUserType = _useState4[1];\n\n  var _useState5 = useState(\"\"),\n      userLoginType = _useState5[0],\n      setUserLoginType = _useState5[1];\n\n  var _useState6 = useState(\"\"),\n      oldPassword = _useState6[0],\n      setOldPassword = _useState6[1];\n\n  var _useState7 = useState(\"\"),\n      newPassword = _useState7[0],\n      setNewPassword = _useState7[1];\n\n  var _useState8 = useState(\"\"),\n      confirmPassword = _useState8[0],\n      setConfirmPassword = _useState8[1];\n\n  var _useState9 = useState(false),\n      loader = _useState9[0],\n      setLoader = _useState9[1];\n\n  var _useState10 = useState({}),\n      errors = _useState10[0],\n      setErrors = _useState10[1];\n\n  var schema = {\n    OldPassword: Joi.string().required(),\n    NewPassword: Joi.string().min(5).required(),\n    ConfirmPassword: Joi.string().required()\n  };\n\n  var valiadateProperty = function valiadateProperty(e) {\n    var _objectSpread2;\n\n    var _e$currentTarget = e.currentTarget,\n        name = _e$currentTarget.name,\n        value = _e$currentTarget.value,\n        className = _e$currentTarget.className;\n\n    var obj = _defineProperty({}, name, value);\n\n    var filedSchema = _defineProperty({}, name, schema[name]);\n\n    var _Joi$validate = Joi.validate(obj, filedSchema),\n        error = _Joi$validate.error;\n\n    var message = error ? error.details[0].message : null;\n    setErrors(_objectSpread(_objectSpread({}, errors), {}, (_objectSpread2 = {}, _defineProperty(_objectSpread2, name, message), _defineProperty(_objectSpread2, \"errordetails\", null), _objectSpread2)));\n  };\n\n  var handleRefresh = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var user;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              setLoader(true);\n              setOldPassword('');\n              setNewPassword('');\n              setConfirmPassword('');\n              user = auth.getCurrentUser();\n              console.log(user);\n              setUserName(user.user.name);\n              setUserType(user.user.type);\n              setUserLoginType(user.user.logintype);\n              setTimeout(function () {\n                setLoader(false);\n              }, 1000);\n\n            case 10:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function handleRefresh() {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  var onOldPasswordChange = function onOldPasswordChange(oldpassword) {\n    setOldPassword(oldpassword);\n  };\n\n  var onNewPasswordChange = function onNewPasswordChange(newpassword) {\n    setNewPassword(newpassword);\n  };\n\n  var onConfirmPasswordChange = function onConfirmPasswordChange(confirmpassword) {\n    setConfirmPassword(confirmpassword);\n  };\n\n  var changePassword = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n      var _objectSpread3, obj, res;\n\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              if (!(newPassword != confirmPassword)) {\n                _context2.next = 4;\n                break;\n              }\n\n              setErrors(_objectSpread(_objectSpread({}, errors), {}, (_objectSpread3 = {}, _defineProperty(_objectSpread3, 'ConfirmPassword', 'Confirm Password must match New Password'), _defineProperty(_objectSpread3, \"errordetails\", null), _objectSpread3)));\n              _context2.next = 32;\n              break;\n\n            case 4:\n              if (!(oldPassword && newPassword && confirmPassword && errors['ConfirmPassword'] === null && errors['NewPassword'] === null && errors['OldPassword'] === null)) {\n                _context2.next = 30;\n                break;\n              }\n\n              _context2.prev = 5;\n              obj = {};\n              obj.oldpassword = oldPassword;\n              obj.newpassword = newPassword;\n              obj.type = userType;\n              obj.logintype = userLoginType;\n              _context2.next = 13;\n              return adminService.changePassword(obj);\n\n            case 13:\n              res = _context2.sent;\n              console.log(res);\n              setAlertMessage('Password Changed Successfully');\n              _context2.next = 18;\n              return handleRefresh();\n\n            case 18:\n              setShowMessage(true);\n              setTimeout(function () {\n                setShowMessage(false);\n              }, 1500);\n              _context2.next = 28;\n              break;\n\n            case 22:\n              _context2.prev = 22;\n              _context2.t0 = _context2[\"catch\"](5);\n              console.log(_context2.t0.response.data.error.message);\n              setAlertMessage(_context2.t0.response.data.error.message);\n              setShowMessage(true);\n              setTimeout(function () {\n                setShowMessage(false);\n              }, 1500);\n\n            case 28:\n              _context2.next = 32;\n              break;\n\n            case 30:\n              console.log(errors);\n\n              if (errors['ConfirmPassword'] != null || errors['NewPassword'] != null || errors['OldPassword'] != null) {\n                setAlertMessage('Please Check the errors');\n                setShowMessage(true);\n                setTimeout(function () {\n                  setShowMessage(false);\n                }, 1500);\n              } else {\n                setAlertMessage('Please Give All Required Fields');\n                setShowMessage(true);\n                setTimeout(function () {\n                  setShowMessage(false);\n                }, 1500);\n              }\n\n            case 32:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2, null, [[5, 22]]);\n    }));\n\n    return function changePassword() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  useEffect(function () {\n    function fetchData() {\n      return _fetchData.apply(this, arguments);\n    }\n\n    function _fetchData() {\n      _fetchData = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3() {\n        return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                _context3.next = 2;\n                return handleRefresh();\n\n              case 2:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3);\n      }));\n      return _fetchData.apply(this, arguments);\n    }\n\n    fetchData();\n  }, []);\n  return __jsx(React.Fragment, null, __jsx(\"div\", {\n    style: {\n      marginBottom: '0rem',\n      padding: '10px 30px',\n      borderRadius: '0rem',\n      backgroundColor: '#eee'\n    },\n    className: \"page-heading d-sm-flex justify-content-sm-between align-items-sm-center\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 7\n    }\n  }, __jsx(\"h2\", {\n    className: \"title mb-3 mb-sm-0\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 9\n    }\n  }, \"Change Password\")), __jsx(\"div\", {\n    style: {\n      padding: '5%'\n    },\n    className: \"col-12\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 7\n    }\n  }, loader && __jsx(\"div\", {\n    className: \"loader-view w-100\",\n    style: {\n      height: 'calc(100vh - 120px)'\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 11\n    }\n  }, __jsx(CircularProgress, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 13\n    }\n  })), !loader && __jsx(\"div\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 11\n    }\n  }, __jsx(\"div\", {\n    className: \"row no-gutters\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 13\n    }\n  }, __jsx(\"div\", {\n    className: \"col-lg-12 d-flex flex-column order-lg-1\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 15\n    }\n  }, __jsx(TextField, {\n    required: true,\n    disabled: true,\n    id: \"required\",\n    label: 'Username',\n    name: 'Username',\n    defaultValue: userName,\n    margin: \"none\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 17\n    }\n  }), __jsx(TextField, {\n    required: true,\n    autoComplete: 'off',\n    id: \"required\",\n    type: 'password',\n    label: 'Old Password',\n    name: 'OldPassword',\n    onChange: function onChange(event) {\n      return onOldPasswordChange(event.target.value);\n    },\n    onBlur: valiadateProperty,\n    value: oldPassword,\n    margin: \"normal\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 17\n    }\n  }), __jsx(\"h6\", {\n    style: {\n      color: 'red'\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 17\n    }\n  }, errors['OldPassword']), __jsx(TextField, {\n    required: true,\n    autoComplete: 'off',\n    id: \"required\",\n    type: 'password',\n    label: 'New Password',\n    name: 'NewPassword',\n    onChange: function onChange(event) {\n      return onNewPasswordChange(event.target.value);\n    },\n    onBlur: valiadateProperty,\n    value: newPassword,\n    margin: \"normal\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 17\n    }\n  }), __jsx(\"h6\", {\n    style: {\n      color: 'red'\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 17\n    }\n  }, errors['NewPassword']), __jsx(TextField, {\n    required: true,\n    type: 'password',\n    autoComplete: 'off',\n    id: \"required\",\n    label: 'Confirm Password',\n    name: 'ConfirmPassword',\n    onChange: function onChange(event) {\n      return onConfirmPasswordChange(event.target.value);\n    },\n    onBlur: valiadateProperty,\n    value: confirmPassword,\n    margin: \"normal\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 173,\n      columnNumber: 17\n    }\n  }), __jsx(\"h6\", {\n    style: {\n      color: 'red'\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 184,\n      columnNumber: 17\n    }\n  }, errors['ConfirmPassword']), __jsx(\"div\", {\n    style: {\n      paddingTop: '2%',\n      textAlign: 'center'\n    },\n    className: \"col-lg-12 col-sm-12 col-12\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 185,\n      columnNumber: 17\n    }\n  }, __jsx(Button, {\n    onClick: function onClick() {\n      return changePassword();\n    },\n    variant: \"contained\",\n    color: \"primary\",\n    className: \"jr-btn text-white\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 186,\n      columnNumber: 19\n    }\n  }, \"Submit\")))), __jsx(Snackbar, {\n    className: \"mb-3 bg-info\",\n    anchorOrigin: {\n      vertical: 'top',\n      horizontal: 'center'\n    },\n    open: showMessage,\n    message: alertMessage,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 190,\n      columnNumber: 13\n    }\n  }))));\n};\n\n_s(ChangePasswordForm, \"JzUo7gAjOuPmz544J/gWIwheM0k=\");\n\n_c = ChangePasswordForm;\nexport default ChangePasswordForm;\n\nvar _c;\n\n$RefreshReg$(_c, \"ChangePasswordForm\");","map":{"version":3,"sources":["D:/Question_cloud/question_cloud_admin_web_new/pages/changepassword/view/index.jsx"],"names":["React","useEffect","useState","useDispatch","useSelector","Modal","Button","Checkbox","Spin","notification","Pagination","Tabs","Select","Joi","ChangePasswordForm","props","showMessage","setShowMessage","alertMessage","setAlertMessage","userName","setUserName","userType","setUserType","userLoginType","setUserLoginType","oldPassword","setOldPassword","newPassword","setNewPassword","confirmPassword","setConfirmPassword","loader","setLoader","errors","setErrors","schema","OldPassword","string","required","NewPassword","min","ConfirmPassword","valiadateProperty","e","currentTarget","name","value","className","obj","filedSchema","validate","error","message","details","handleRefresh","user","auth","getCurrentUser","console","log","type","logintype","setTimeout","onOldPasswordChange","oldpassword","onNewPasswordChange","newpassword","onConfirmPasswordChange","confirmpassword","changePassword","adminService","res","response","data","fetchData","marginBottom","padding","borderRadius","backgroundColor","height","event","target","color","paddingTop","textAlign","vertical","horizontal"],"mappings":"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","sourcesContent":[" import React, { useEffect, useState } from 'react';\r\n import { useDispatch, useSelector } from 'react-redux';\r\n import { Modal, Button, Checkbox, Spin, notification, Pagination, Tabs, Select } from 'antd';\r\n// import * as adminService from '../../../../../../services/adminService';\r\n// import auth from '../../../../../../services/authService';\r\nimport Joi from 'joi-browser';\r\n\r\n\r\nconst ChangePasswordForm = (props) => {\r\n  const [showMessage, setShowMessage] = useState(false);\r\n  const [alertMessage, setAlertMessage] = useState(\"\");\r\n  const [userName, setUserName] = useState(\"\");\r\n  const [userType, setUserType] = useState(\"\");\r\n  const [userLoginType, setUserLoginType] = useState(\"\");\r\n  const [oldPassword, setOldPassword] = useState(\"\");\r\n  const [newPassword, setNewPassword] = useState(\"\");\r\n  const [confirmPassword, setConfirmPassword] = useState(\"\");\r\n  const [loader, setLoader] = useState(false);\r\n  const [errors, setErrors] = useState({});\r\n\r\n  const schema = {\r\n    OldPassword: Joi.string().required(),\r\n    NewPassword: Joi.string().min(5).required(),\r\n    ConfirmPassword: Joi.string().required(),\r\n  }\r\n\r\n  const valiadateProperty = (e) => {\r\n    let { name, value, className } = e.currentTarget;\r\n    const obj = { [name]: value };\r\n    const filedSchema = { [name]: schema[name] };\r\n    const { error } = Joi.validate(obj, filedSchema);\r\n\r\n    let message = error ? error.details[0].message : null;\r\n    setErrors({ ...errors, [name]: message, \"errordetails\": null })\r\n  }\r\n\r\n  const handleRefresh = async () => {\r\n    setLoader(true);\r\n    setOldPassword('');\r\n    setNewPassword('');\r\n    setConfirmPassword('');\r\n    let user = auth.getCurrentUser();\r\n    console.log(user);\r\n    setUserName(user.user.name);\r\n    setUserType(user.user.type);\r\n    setUserLoginType(user.user.logintype);\r\n    setTimeout(() => {\r\n      setLoader(false)\r\n    }, 1000);\r\n  }\r\n\r\n  const onOldPasswordChange = (oldpassword) => {\r\n    setOldPassword(oldpassword);\r\n  }\r\n\r\n  const onNewPasswordChange = (newpassword) => {\r\n    setNewPassword(newpassword);\r\n  }\r\n\r\n  const onConfirmPasswordChange = (confirmpassword) => {\r\n    setConfirmPassword(confirmpassword);\r\n  }\r\n\r\n  const changePassword = async () => {\r\n    if (newPassword != confirmPassword) {\r\n      setErrors({ ...errors, ['ConfirmPassword']: 'Confirm Password must match New Password', \"errordetails\": null })\r\n    } else {\r\n      if (oldPassword &&\r\n        newPassword &&\r\n        confirmPassword &&\r\n        errors['ConfirmPassword'] === null &&\r\n        errors['NewPassword'] === null &&\r\n        errors['OldPassword'] === null) {\r\n        try {\r\n          let obj = {};\r\n          obj.oldpassword = oldPassword;\r\n          obj.newpassword = newPassword;\r\n          obj.type = userType;\r\n          obj.logintype = userLoginType;\r\n          let res = await adminService.changePassword(obj);\r\n          console.log(res);\r\n          setAlertMessage('Password Changed Successfully');\r\n          await handleRefresh();\r\n          setShowMessage(true);\r\n          setTimeout(() => {\r\n            setShowMessage(false)\r\n          }, 1500);\r\n        } catch (err) {\r\n          console.log(err.response.data.error.message);\r\n          setAlertMessage(err.response.data.error.message);\r\n          setShowMessage(true);\r\n          setTimeout(() => {\r\n            setShowMessage(false)\r\n          }, 1500);\r\n        }\r\n      } else {\r\n        console.log(errors);\r\n        if (errors['ConfirmPassword'] != null ||\r\n          errors['NewPassword'] != null ||\r\n          errors['OldPassword'] != null) {\r\n          setAlertMessage('Please Check the errors');\r\n          setShowMessage(true);\r\n          setTimeout(() => {\r\n            setShowMessage(false)\r\n          }, 1500);\r\n        } else {\r\n          setAlertMessage('Please Give All Required Fields');\r\n          setShowMessage(true);\r\n          setTimeout(() => {\r\n            setShowMessage(false)\r\n          }, 1500);\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    async function fetchData() {\r\n      await handleRefresh()\r\n    }\r\n    fetchData();\r\n  }, [])\r\n\r\n\r\n  return (\r\n    <>\r\n      <div style={{ marginBottom: '0rem', padding: '10px 30px', borderRadius: '0rem', backgroundColor: '#eee' }} className=\"page-heading d-sm-flex justify-content-sm-between align-items-sm-center\">\r\n        <h2 className=\"title mb-3 mb-sm-0\">Change Password</h2>\r\n      </div>\r\n      <div style={{ padding: '5%' }} className=\"col-12\">\r\n        {loader &&\r\n          <div className=\"loader-view w-100\"\r\n            style={{ height: 'calc(100vh - 120px)' }}>\r\n            <CircularProgress />\r\n          </div>\r\n        }\r\n        {!loader &&\r\n          <div>\r\n            <div className=\"row no-gutters\">\r\n              <div className=\"col-lg-12 d-flex flex-column order-lg-1\">\r\n                <TextField\r\n                  required\r\n                  disabled={true}\r\n                  id=\"required\"\r\n                  label={'Username'}\r\n                  name={'Username'}\r\n                  defaultValue={userName}\r\n                  margin=\"none\" />\r\n                <TextField\r\n                  required\r\n                  autoComplete={'off'}\r\n                  id=\"required\"\r\n                  type={'password'}\r\n                  label={'Old Password'}\r\n                  name={'OldPassword'}\r\n                  onChange={(event) => onOldPasswordChange(event.target.value)}\r\n                  onBlur={valiadateProperty}\r\n                  value={oldPassword}\r\n                  margin=\"normal\" />\r\n                <h6 style={{ color: 'red' }}>{errors['OldPassword']}</h6>\r\n                <TextField\r\n                  required\r\n                  autoComplete={'off'}\r\n                  id=\"required\"\r\n                  type={'password'}\r\n                  label={'New Password'}\r\n                  name={'NewPassword'}\r\n                  onChange={(event) => onNewPasswordChange(event.target.value)}\r\n                  onBlur={valiadateProperty}\r\n                  value={newPassword}\r\n                  margin=\"normal\" />\r\n                <h6 style={{ color: 'red' }}>{errors['NewPassword']}</h6>\r\n                <TextField\r\n                  required\r\n                  type={'password'}\r\n                  autoComplete={'off'}\r\n                  id=\"required\"\r\n                  label={'Confirm Password'}\r\n                  name={'ConfirmPassword'}\r\n                  onChange={(event) => onConfirmPasswordChange(event.target.value)}\r\n                  onBlur={valiadateProperty}\r\n                  value={confirmPassword}\r\n                  margin=\"normal\" />\r\n                <h6 style={{ color: 'red' }}>{errors['ConfirmPassword']}</h6>\r\n                <div style={{ paddingTop: '2%', textAlign: 'center' }} className=\"col-lg-12 col-sm-12 col-12\">\r\n                  <Button onClick={() => changePassword()} variant=\"contained\" color=\"primary\" className=\"jr-btn text-white\">Submit</Button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <Snackbar\r\n              className=\"mb-3 bg-info\"\r\n              anchorOrigin={{ vertical: 'top', horizontal: 'center' }}\r\n              open={showMessage}\r\n              message={alertMessage}\r\n            />\r\n          </div>\r\n        }\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default ChangePasswordForm;"]},"metadata":{},"sourceType":"module"}